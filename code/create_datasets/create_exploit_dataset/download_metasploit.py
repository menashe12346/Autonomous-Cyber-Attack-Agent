import subprocess
from pathlib import Path
import os

from config import DATABASES_PATH

def download_metasploit():
    FINAL_DIR = Path(DATABASES_PATH) / "metasploit-framework"
    repo_url = "https://github.com/rapid7/metasploit-framework.git"

    if os.path.exists(FINAL_DIR):
        print(f"✅ Metasploit already exists, Skipping...")
        return

    try:
        print(f"⬇️ Downloading Metasploit...")
        subprocess.run(["git", "clone", "--depth", "1", repo_url, FINAL_DIR], check=True)
        print(f"✅ Metasploit downloaded successfully")
    except subprocess.CalledProcessError as e:
        print(f"❌ Error while downloading: {e}")
